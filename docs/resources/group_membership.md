---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ad_group_membership Resource - ad"
subcategory: ""
description: |-
  Manages the membership of an Active Directory group. This resource allows you to define the complete set of members for a group, with automatic anti-drift protection through identifier normalization.
  Anti-Drift Protection: This resource automatically normalizes all member identifiers to distinguished names (DNs) internally while preserving your original configuration. The members attribute retains exactly what you configure, while members_normalized shows the DNs used for Active Directory operations.
  Supported Identifier Formats:
  Distinguished Name (DN): CN=John Doe,OU=Users,DC=example,DC=comObject GUID: 550e8400-e29b-41d4-a716-446655440000User Principal Name (UPN): john@example.comSAM Account Name: DOMAIN\john or johnSecurity Identifier (SID): S-1-5-21-123456789-123456789-123456789-1001
---

# ad_group_membership (Resource)

Manages the membership of an Active Directory group. This resource allows you to define the complete set of members for a group, with automatic anti-drift protection through identifier normalization.

**Anti-Drift Protection**: This resource automatically normalizes all member identifiers to distinguished names (DNs) internally while preserving your original configuration. The `members` attribute retains exactly what you configure, while `members_normalized` shows the DNs used for Active Directory operations.

**Supported Identifier Formats**:
- Distinguished Name (DN): `CN=John Doe,OU=Users,DC=example,DC=com`
- Object GUID: `550e8400-e29b-41d4-a716-446655440000`
- User Principal Name (UPN): `john@example.com`
- SAM Account Name: `DOMAIN\john` or `john`
- Security Identifier (SID): `S-1-5-21-123456789-123456789-123456789-1001`

## Example Usage

```terraform
# AD Group Membership Examples

terraform {
  required_providers {
    ad = {
      source = "isometry/ad"
    }
  }
}

provider "ad" {
  domain   = "example.com"
  username = "admin@example.com"
  password = "secure_password"
}

# Create a group for membership examples
resource "ad_group" "project_team" {
  name        = "Project Alpha Team"
  container   = "ou=Groups,dc=example,dc=com"
  description = "Members of Project Alpha"
}

# Basic membership with different identifier formats
resource "ad_group_membership" "project_members" {
  group_id = ad_group.project_team.id
  members = [
    "user1@example.com",                             # UPN format
    "cn=service-account,cn=users,dc=example,dc=com", # DN format
    "12345678-1234-5678-9012-123456789012",          # GUID format
    "S-1-5-21-123456789-123456789-123456789-1002",   # SID format
    "EXAMPLE\\user3"                                 # SAM format
  ]
}

# Nested group membership (group containing other groups)
resource "ad_group" "admin_group" {
  name        = "Project Administrators"
  container   = "ou=Groups,dc=example,dc=com"
  description = "Administrators for projects"
}

resource "ad_group_membership" "admin_members" {
  group_id = ad_group.admin_group.id
  members = [
    "admin1@example.com",
    "admin2@example.com",
    # Include another group as a member
    ad_group.project_team.dn
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `group_id` (String) The objectGUID of the group whose membership is being managed. This must be the GUID of an existing Active Directory group.
- `members` (Set of String) Set of group member identifiers. Members can be specified using any supported identifier format: Distinguished Name (DN), Object GUID, User Principal Name (UPN), SAM Account Name, or Security Identifier (SID). This attribute preserves your original configuration exactly as specified. **Note**: This resource manages the complete membership set - members not listed here will be removed from the group.

### Read-Only

- `id` (String) The resource identifier, which is the objectGUID of the group. This is the same value as `group_id`.
- `members_normalized` (Set of String) The normalized distinguished names (DNs) of all group members. This computed attribute shows the actual DNs used for Active Directory operations, derived from the identifiers specified in the `members` attribute.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
#!/bin/bash

# Import examples for ad_group_membership resource
# Group memberships can be imported using the group's identifier

# Import by group Distinguished Name
terraform import ad_group_membership.project_team_members "cn=Project Alpha Team,ou=Project Groups,dc=example,dc=com"

# Import by group GUID (ObjectGUID)
terraform import ad_group_membership.add_to_existing "12345678-1234-5678-9012-123456789012"

# Import by group SID
terraform import ad_group_membership.admin_group_members "S-1-5-21-123456789-123456789-123456789-1001"

# Import by group SAM Account Name
terraform import ad_group_membership.project_team_members "ProjectAlpha"
```
